-- BP 7.1.6 content: ClassStateMachine syschar: 3 persistence-version: 7.1.6

INSERT INTO SM_ASM
	VALUES ("8b071e65-1742-4627-b6d7-41764e4078f8",
	"20cc2cff-6ad5-4069-8c87-592cf83b51ee");
INSERT INTO SM_SM
	VALUES ("8b071e65-1742-4627-b6d7-41764e4078f8",
	'',
	0);
INSERT INTO SM_MOORE
	VALUES ("8b071e65-1742-4627-b6d7-41764e4078f8");
INSERT INTO SM_SGEVT
	VALUES ("93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	"e92e8e21-8810-4acb-b948-b31ae7895014",
	"00000000-0000-0000-0000-000000000000",
	'HR::registerListener');
INSERT INTO SPR_PS_PROXY
	VALUES ("e92e8e21-8810-4acb-b948-b31ae7895014",
	'registerListener',
	'',
	'',
	1,
	'../../../HeartRateMonitor.xtuml');
INSERT INTO SM_SEVT
	VALUES ("93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	1,
	'registerListener',
	0,
	'',
	'HR::registerListener',
	'');
INSERT INTO SM_SGEVT
	VALUES ("6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	"54fcfe9d-e57d-4ce7-9223-11c00ee6b471",
	"00000000-0000-0000-0000-000000000000",
	'HR::unregisterListener');
INSERT INTO SPR_PS_PROXY
	VALUES ("54fcfe9d-e57d-4ce7-9223-11c00ee6b471",
	'unregisterListener',
	'',
	'',
	1,
	'../../../HeartRateMonitor.xtuml');
INSERT INTO SM_SEVT
	VALUES ("6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	2,
	'unregisterListener',
	0,
	'',
	'HR::unregisterListener',
	'');
INSERT INTO SM_LEVT
	VALUES ("610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEVT
	VALUES ("610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	3,
	'timeout',
	0,
	'',
	'HeartRateMonitor_A3',
	'');
INSERT INTO SM_STATE
	VALUES ("f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	'idle',
	1,
	0);
INSERT INTO SM_SEME
	VALUES ("f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_CH
	VALUES ("f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO SM_SEME
	VALUES ("f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EIGN
	VALUES ("f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO SM_SEME
	VALUES ("f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_STATE
	VALUES ("d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	'monitoring',
	2,
	0);
INSERT INTO SM_CH
	VALUES ("d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO SM_SEME
	VALUES ("d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEME
	VALUES ("d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEME
	VALUES ("d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("e6a50d20-1465-432a-ac9e-ffebe1c29947",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"93f6eeff-0e3b-4488-bcb0-42d0fe1d293c",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("e6a50d20-1465-432a-ac9e-ffebe1c29947",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("cf602ede-9914-45ab-b766-35c55327f98b",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"6abdfba6-5594-4566-bd9b-77bee702d6b1",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("cf602ede-9914-45ab-b766-35c55327f98b",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"f7d5a32e-ee2b-4af1-ba59-88132409ad85",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("f6316888-f65a-43c5-aa19-a99ce6036b44",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"610f4bf1-2612-43b5-aac1-f2ee61edecd3",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("f6316888-f65a-43c5-aa19-a99ce6036b44",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"d21aeee8-5d43-4b08-980c-33bed6dc98eb",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_MOAH
	VALUES ("69b405d0-15f3-4f10-8a17-9aee4d2fd749",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"f7d5a32e-ee2b-4af1-ba59-88132409ad85");
INSERT INTO SM_AH
	VALUES ("69b405d0-15f3-4f10-8a17-9aee4d2fd749",
	"8b071e65-1742-4627-b6d7-41764e4078f8");
INSERT INTO SM_ACT
	VALUES ("69b405d0-15f3-4f10-8a17-9aee4d2fd749",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	1,
	'',
	'');
INSERT INTO SM_MOAH
	VALUES ("c69adc46-75f5-454c-a429-da99da79358a",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"d21aeee8-5d43-4b08-980c-33bed6dc98eb");
INSERT INTO SM_AH
	VALUES ("c69adc46-75f5-454c-a429-da99da79358a",
	"8b071e65-1742-4627-b6d7-41764e4078f8");
INSERT INTO SM_ACT
	VALUES ("c69adc46-75f5-454c-a429-da99da79358a",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	1,
	'select any monitor from instances of HeartRateMonitor;
send HR::heartRateChanged(heartRate: monitor.recentHeartRate);
monitor.recentHeartRate = monitor.recentHeartRate + 1;',
	'');
INSERT INTO SM_TAH
	VALUES ("9f651445-2fd8-44b8-ab16-63395b990c9b",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"e6a50d20-1465-432a-ac9e-ffebe1c29947");
INSERT INTO SM_AH
	VALUES ("9f651445-2fd8-44b8-ab16-63395b990c9b",
	"8b071e65-1742-4627-b6d7-41764e4078f8");
INSERT INTO SM_ACT
	VALUES ("9f651445-2fd8-44b8-ab16-63395b990c9b",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	1,
	'
select any monitor from instances of HeartRateMonitor;
if (empty monitor)
  create object instance monitor of HeartRateMonitor;
end if;
monitor.recentHeartRate = 50;

LOG::LogInfo(message: "listener registered");

// start timer
create event instance timeout of HeartRateMonitor_A3:timeout() to HeartRateMonitor class;
monitor.timer = TIM::timer_start_recurring( event_inst: timeout, microseconds: (HeartRateSamplingPeriod * 1000000) ); ',
	'');
INSERT INTO SM_TAH
	VALUES ("fed95505-3a37-46e2-8e6b-76165253ae2e",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"cf602ede-9914-45ab-b766-35c55327f98b");
INSERT INTO SM_AH
	VALUES ("fed95505-3a37-46e2-8e6b-76165253ae2e",
	"8b071e65-1742-4627-b6d7-41764e4078f8");
INSERT INTO SM_ACT
	VALUES ("fed95505-3a37-46e2-8e6b-76165253ae2e",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	1,
	'select any monitor from instances of HeartRateMonitor;
res = TIM::timer_cancel(timer_inst_ref: monitor.timer);
if ( res )
  LOG::LogSuccess( message: "Heart Rate Monitor: timer_cancel() succeeded." );
else
  LOG::LogFailure( message: "Heart Rate Monitor: timer_cancel() failed." );
end if;',
	'');
INSERT INTO SM_TAH
	VALUES ("012312cd-5327-41da-a736-0bf1adcde8f8",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	"f6316888-f65a-43c5-aa19-a99ce6036b44");
INSERT INTO SM_AH
	VALUES ("012312cd-5327-41da-a736-0bf1adcde8f8",
	"8b071e65-1742-4627-b6d7-41764e4078f8");
INSERT INTO SM_ACT
	VALUES ("012312cd-5327-41da-a736-0bf1adcde8f8",
	"8b071e65-1742-4627-b6d7-41764e4078f8",
	1,
	'',
	'');
INSERT INTO O_OBJ_PROXY
	VALUES ("20cc2cff-6ad5-4069-8c87-592cf83b51ee",
	'HeartRateMonitor',
	1,
	'HeartRateMonitor',
	'Represents the heart-rate monitoring facility.',
	"00000000-0000-0000-0000-000000000000",
	'../HeartRateMonitor.xtuml');
