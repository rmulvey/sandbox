-- BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

INSERT INTO O_OBJ
	VALUES ("8740acb0-7fbf-4326-b912-68f6820a58a3",
	'Polymorphic Event',
	522,
	'SM_PEVT',
	'A polymorphic event (SM_PEVT) is one that is defined in a super-type state machine  and used in one or more sub-type state machines.  Each polymorphic event has one or more aliases (SM_NLEVT) in one or more sub-types.',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("3ecf6819-8ad1-41b9-9de5-4a71a5bf7dd2",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'dispose',
	'',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'select one evt related by self->SM_EVT[R525];
unrelate self from evt across R525;
select many nlevts related by self->SM_NLEVT[R527];
for each nlevt in nlevts
  unrelate self from nlevt across R527;
  nlevt.dispose();
end for;
',
	1,
	'',
	"00e47854-5cc7-412a-a110-a62433919ffa");
INSERT INTO O_TFR
	VALUES ("00e47854-5cc7-412a-a110-a62433919ffa",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'createNonLocalEventForStateMachine',
	'',
	"ba5eda7a-def5-0000-0000-000000000005",
	1,
	'/*
Creates (and returns the ID of) a non-local event that is an alias of this 
polymorphic event for the given state machine.
*/

// create a non-local event to alias this polymorphic event
create object instance nonlocalEvent of SM_NLEVT;
relate nonlocalEvent to self across R527;

// create the supertype instances of the above non-local event, 
// and copy into them the attribute values of the corresponding
// instances of this polymorphic event
create object instance matrixEvent of SM_SEVT;
relate matrixEvent to nonlocalEvent across R526;
create object instance newEvent of SM_EVT;
relate newEvent to matrixEvent across R525;
select one event related by self->SM_EVT[R525];
newEvent.Numb = event.Numb;
newEvent.Mning = event.Mning;
newEvent.Is_Lbl_U = event.Is_Lbl_U;
newEvent.Unq_Lbl = event.Unq_Lbl;
newEvent.Descrip = event.Descrip;
select any machine from instances of SM_SM
	where selected.SM_ID == param.stateMachineId;
relate newEvent to machine across R502;
matrixEvent.createDefaultMatrixEntries();

return newEvent.SMevt_ID;
',
	1,
	'',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TPARM
	VALUES ("6f2129e6-a038-427e-a8e3-f645887ce81e",
	"00e47854-5cc7-412a-a110-a62433919ffa",
	'stateMachineId',
	"ba5eda7a-def5-0000-0000-000000000005",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TFR
	VALUES ("e55a3796-af1a-48e4-bcde-008f1bec821a",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'migrateToLocalEvent',
	'',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'// if there are no more non-local events that are aliasing this
// poly
select many aliases related by self->SM_NLEVT[R527];
if (empty aliases)
  // migrate this polymorphic event back to a local event
  select one event related by self->SM_EVT[R525];
  self.dispose();
  create object instance matrixEvent of SM_SEVT;
  relate matrixEvent to event across R525;
  matrixEvent.createDefaultMatrixEntries();
  create object instance localEvent of SM_LEVT;
  relate localEvent to matrixEvent across R526;
end if;',
	1,
	'',
	"3ecf6819-8ad1-41b9-9de5-4a71a5bf7dd2");
INSERT INTO O_TFR
	VALUES ("f6f00488-ebe5-4eac-8ea5-463d43cfa6af",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'convertToInstance',
	'Translate:native',
	"a5d8b590-a627-4af4-afdf-152c889769b6",
	1,
	'return this;',
	0,
	'',
	"e55a3796-af1a-48e4-bcde-008f1bec821a");
INSERT INTO S_DT_PROXY
	VALUES ("a5d8b590-a627-4af4-afdf-152c889769b6",
	"00000000-0000-0000-0000-000000000000",
	'instance',
	'',
	'',
	'../../Datatypes/Datatypes.xtuml');
INSERT INTO O_TFR
	VALUES ("c925316a-a0e2-4cdc-93ef-679cf6cd3a1c",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'getCachedLocalClassName',
	'Translate:native',
	"ba5eda7a-def5-0000-0000-000000000004",
	1,
	'	return m_localclassname;',
	0,
	'',
	"f6f00488-ebe5-4eac-8ea5-463d43cfa6af");
INSERT INTO O_TFR
	VALUES ("55c07e48-596c-47c6-b903-c367f6e87406",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'getCachedLocalClassKL',
	'Translate:native',
	"ba5eda7a-def5-0000-0000-000000000004",
	1,
	'	return m_localclasskl;',
	0,
	'',
	"c925316a-a0e2-4cdc-93ef-679cf6cd3a1c");
INSERT INTO O_TFR
	VALUES ("0d38ed79-6f69-42b9-b434-9b5d3e7affeb",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'setCachedLocalClassName',
	'Translate:native',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'	m_localclassname = p_Value;',
	0,
	'',
	"55c07e48-596c-47c6-b903-c367f6e87406");
INSERT INTO O_TPARM
	VALUES ("81c5a05d-278a-4347-88b6-cc11b9539ec8",
	"0d38ed79-6f69-42b9-b434-9b5d3e7affeb",
	'value',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TFR
	VALUES ("29106eaf-e7d7-4e01-9e85-0de6fa757da2",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'setCachedLocalClassKL',
	'Translate:native',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'	m_localclasskl = p_Value;',
	0,
	'',
	"0d38ed79-6f69-42b9-b434-9b5d3e7affeb");
INSERT INTO O_TPARM
	VALUES ("998e3331-ed59-4fb4-bf46-550a7a2e48eb",
	"29106eaf-e7d7-4e01-9e85-0de6fa757da2",
	'value',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TFR
	VALUES ("0476c6b9-3be0-463d-8f83-74e5318ed03f",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'get_name',
	'',
	"ba5eda7a-def5-0000-0000-000000000004",
	1,
	'return self.localEventMning;',
	1,
	'',
	"29106eaf-e7d7-4e01-9e85-0de6fa757da2");
INSERT INTO O_TFR
	VALUES ("e61f982f-c92b-4e3a-8e46-c20125e591af",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'getCachedLocalEventMning',
	'Translate:native',
	"ba5eda7a-def5-0000-0000-000000000004",
	1,
	'	return m_localeventmning;',
	0,
	'',
	"0476c6b9-3be0-463d-8f83-74e5318ed03f");
INSERT INTO O_TFR
	VALUES ("8e3081f5-fabf-41ac-bafb-4698039fab65",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'setCachedLocalEventMning',
	'Translate:native',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'	m_localeventmning = p_Value;',
	0,
	'',
	"e61f982f-c92b-4e3a-8e46-c20125e591af");
INSERT INTO O_TPARM
	VALUES ("a310b7bd-45f0-44ca-b30e-0583f4cec3bb",
	"8e3081f5-fabf-41ac-bafb-4698039fab65",
	'value',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_REF
	VALUES ("8740acb0-7fbf-4326-b912-68f6820a58a3",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	"cdb80faa-5a5c-42cb-a807-72e5ffcc371d",
	"d3101853-96e3-4f51-8341-09418966df86",
	"9c8a5aa4-2bf3-4cce-80a1-efb16e192876",
	"1552b932-bef5-4860-afb9-e9272363bff5",
	"d771393b-8c50-4301-954c-3be9f9f1734f",
	"f6b66df1-422e-4fdc-a3e8-faa31249cd77",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'State Machine Event',
	'SMevt_ID',
	'R525');
INSERT INTO R_RGO_PROXY
	VALUES ("8740acb0-7fbf-4326-b912-68f6820a58a3",
	"d3101853-96e3-4f51-8341-09418966df86",
	"9c8a5aa4-2bf3-4cce-80a1-efb16e192876",
	'../State Machine.xtuml');
INSERT INTO O_RTIDA_PROXY
	VALUES ("cdb80faa-5a5c-42cb-a807-72e5ffcc371d",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	"d3101853-96e3-4f51-8341-09418966df86",
	"1552b932-bef5-4860-afb9-e9272363bff5",
	'../State Machine.xtuml');
INSERT INTO O_RATTR
	VALUES ("d771393b-8c50-4301-954c-3be9f9f1734f",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"cdb80faa-5a5c-42cb-a807-72e5ffcc371d",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	'SMevt_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("cdb80faa-5a5c-42cb-a807-72e5ffcc371d",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	'../State Machine Event/State Machine Event.xtuml');
INSERT INTO O_ATTR
	VALUES ("d771393b-8c50-4301-954c-3be9f9f1734f",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"00000000-0000-0000-0000-000000000000",
	'SMevt_ID',
	'',
	'',
	'SMevt_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_REF
	VALUES ("8740acb0-7fbf-4326-b912-68f6820a58a3",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	"2aed56a3-4a18-4289-81b3-7637432f7b8b",
	"d3101853-96e3-4f51-8341-09418966df86",
	"9c8a5aa4-2bf3-4cce-80a1-efb16e192876",
	"1552b932-bef5-4860-afb9-e9272363bff5",
	"fae43da5-f975-4e3c-bd5e-74e9f476daef",
	"b4d984f6-cb91-42ce-8f91-d03ff4ae6502",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'State Machine Event',
	'SM_ID',
	'R525');
INSERT INTO O_RTIDA_PROXY
	VALUES ("2aed56a3-4a18-4289-81b3-7637432f7b8b",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	"d3101853-96e3-4f51-8341-09418966df86",
	"1552b932-bef5-4860-afb9-e9272363bff5",
	'../State Machine.xtuml');
INSERT INTO O_RATTR
	VALUES ("fae43da5-f975-4e3c-bd5e-74e9f476daef",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"918c8926-3597-4f97-bdc4-a65cf9de1666",
	"a1150e32-8c3e-4e21-8295-75b0c795b02d",
	1,
	'SM_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("918c8926-3597-4f97-bdc4-a65cf9de1666",
	"a1150e32-8c3e-4e21-8295-75b0c795b02d",
	'../State Machine/State Machine.xtuml');
INSERT INTO O_ATTR
	VALUES ("fae43da5-f975-4e3c-bd5e-74e9f476daef",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"d771393b-8c50-4301-954c-3be9f9f1734f",
	'SM_ID',
	'',
	'',
	'SM_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_REF
	VALUES ("8740acb0-7fbf-4326-b912-68f6820a58a3",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	"10872b9f-7a91-4642-9665-8bc5d319b6da",
	"d3101853-96e3-4f51-8341-09418966df86",
	"9c8a5aa4-2bf3-4cce-80a1-efb16e192876",
	"1552b932-bef5-4860-afb9-e9272363bff5",
	"fedf1591-65da-4496-b77d-93b37d754e99",
	"520548cd-798e-4b4d-a909-18ee07bc55c7",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'State Machine Event',
	'SMspd_ID',
	'R525');
INSERT INTO O_RTIDA_PROXY
	VALUES ("10872b9f-7a91-4642-9665-8bc5d319b6da",
	"85bdf335-51a2-4603-b6af-19ba8f7a45e5",
	1,
	"d3101853-96e3-4f51-8341-09418966df86",
	"1552b932-bef5-4860-afb9-e9272363bff5",
	'../State Machine.xtuml');
INSERT INTO O_RATTR
	VALUES ("fedf1591-65da-4496-b77d-93b37d754e99",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"687f0a3c-0ce1-40b3-a498-b18d64de5cc5",
	"c7bef657-8c46-4a09-b499-e99eb1f234d4",
	1,
	'SMspd_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("687f0a3c-0ce1-40b3-a498-b18d64de5cc5",
	"c7bef657-8c46-4a09-b499-e99eb1f234d4",
	'../Event Supplemental Data/Event Supplemental Data.xtuml');
INSERT INTO O_ATTR
	VALUES ("fedf1591-65da-4496-b77d-93b37d754e99",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"fae43da5-f975-4e3c-bd5e-74e9f476daef",
	'SMspd_ID',
	'',
	'',
	'SMspd_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_DBATTR
	VALUES ("c176940c-9972-4b56-8d69-e460152acab6",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'select one clazz related by self->SM_EVT[R525]->SM_SM[R502]->SM_ASM[R517]
                                                                  ->O_OBJ[R519];
if(empty clazz)
  select one clazz related by self->SM_EVT[R525]->SM_SM[R502]->SM_ISM[R517]
                                                                  ->O_OBJ[R518];
end if;
if(not_empty clazz)
  self.setCachedLocalClassName(value: clazz.Name);
  self.localClassName = clazz.Name;
else
  self.localClassName = self.getCachedLocalClassName();
end if;',
	1);
INSERT INTO O_BATTR
	VALUES ("c176940c-9972-4b56-8d69-e460152acab6",
	"8740acb0-7fbf-4326-b912-68f6820a58a3");
INSERT INTO O_ATTR
	VALUES ("c176940c-9972-4b56-8d69-e460152acab6",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"fedf1591-65da-4496-b77d-93b37d754e99",
	'localClassName',
	'User_Visible:false',
	'',
	'localClassName',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_DBATTR
	VALUES ("20d5aa9d-dc7f-425f-a23a-6662f7fb0f0b",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'select one clazz related by self->SM_EVT[R525]->SM_SM[R502]->SM_ASM[R517]
                                                                  ->O_OBJ[R519];
if(empty clazz)
  select one clazz related by self->SM_EVT[R525]->SM_SM[R502]->SM_ISM[R517]
                                                                  ->O_OBJ[R518];
end if;
if(not_empty clazz)
  self.setCachedLocalClassKL(value: clazz.Key_Lett);
  self.localClassKL = clazz.Key_Lett;
else
  self.localClassKL = self.getCachedLocalClassKL();
end if;',
	1);
INSERT INTO O_BATTR
	VALUES ("20d5aa9d-dc7f-425f-a23a-6662f7fb0f0b",
	"8740acb0-7fbf-4326-b912-68f6820a58a3");
INSERT INTO O_ATTR
	VALUES ("20d5aa9d-dc7f-425f-a23a-6662f7fb0f0b",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"c176940c-9972-4b56-8d69-e460152acab6",
	'localClassKL',
	'User_Visible:false',
	'',
	'localClassKL',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_DBATTR
	VALUES ("e5251842-3a10-4264-9bc4-2633b35bbcde",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	'select one evt related by self->SM_EVT[R525];
if(not_empty evt)
  self.setCachedLocalEventMning(value: evt.Mning); 
  self.localEventMning = evt.Mning;
else
  self.localEventMning = self.getCachedLocalEventMning();
end if;',
	1);
INSERT INTO O_BATTR
	VALUES ("e5251842-3a10-4264-9bc4-2633b35bbcde",
	"8740acb0-7fbf-4326-b912-68f6820a58a3");
INSERT INTO O_ATTR
	VALUES ("e5251842-3a10-4264-9bc4-2633b35bbcde",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	"20d5aa9d-dc7f-425f-a23a-6662f7fb0f0b",
	'localEventMning',
	'User_Visible:false',
	'',
	'localEventMning',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"8740acb0-7fbf-4326-b912-68f6820a58a3");
INSERT INTO O_OIDA
	VALUES ("fae43da5-f975-4e3c-bd5e-74e9f476daef",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	0,
	'SM_ID');
INSERT INTO O_OIDA
	VALUES ("d771393b-8c50-4301-954c-3be9f9f1734f",
	"8740acb0-7fbf-4326-b912-68f6820a58a3",
	0,
	'SMevt_ID');
INSERT INTO O_ID
	VALUES (1,
	"8740acb0-7fbf-4326-b912-68f6820a58a3");
INSERT INTO O_ID
	VALUES (2,
	"8740acb0-7fbf-4326-b912-68f6820a58a3");
INSERT INTO PE_PE
	VALUES ("8740acb0-7fbf-4326-b912-68f6820a58a3",
	1,
	"3314c083-3e42-4dfd-8a60-9305d01957ef",
	"00000000-0000-0000-0000-000000000000",
	4);
INSERT INTO EP_PKG_PROXY
	VALUES ("3314c083-3e42-4dfd-8a60-9305d01957ef",
	"00000000-0000-0000-0000-000000000000",
	"2f3ea6a7-20e9-405c-b68c-7fba041e7daf",
	'State Machine',
	'Classes (O_OBJ) that have interesting behavior are given lifecycles. These lifecycles are described using state machines (SM_SM). A state machine consists of states, events, transitions and state actions. The state machine exists for each instance of the class for which it has been modeled (SM_ISM). A state machine can also be an assigner state machine (SM_ASM) of which only one can exists for all class instances. The purpose of the assigner state machine is to act as a single point of control through which competing requests are serialized.',
	501,
	'../State Machine.xtuml');
