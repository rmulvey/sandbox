-- BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

INSERT INTO O_OBJ
	VALUES ("068b3e3f-edc5-45ef-98c6-10d96f553689",
	'Create Event to Instance',
	700,
	'E_CEI',
	'This class represents the precreation of an event to an instance for later delivery. Uses the same concepts as Generate but does not actually generate the event. It instead yields an event instance that can be generated later using Generate Preexisting Event.',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("59d75a70-03eb-4b6c-be26-06c15f5bf9dd",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	'dispose',
	'This operation disconnects an instance, and all instances it is 
responsible for, from the model.',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'select one var related by self->V_VAR[R711];
if ( not empty var )
  unrelate self from var across R711;
end if;
delete object instance self;
',
	1,
	'',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("5450b082-2ba8-4cf4-aee4-df89ed4b0f81",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	'execute',
	'',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	' //Event: Create Event to Instance.execute()

// Create a pending event for this event and relate it to the recipient instance
select one evt related by self->E_CSME[R704]->SM_EVT[R706];
select one body related by self->V_VAR[R711]->ACT_BLK[R823]->ACT_ACT[R601];
// Grab the stack frame
select any stack_frame from instances of I_STF where (selected.Stack_Frame_ID == param.stack_frame_id);
if (empty stack_frame)
  //Invalid stack frame ID!
  pathMsg = "<No Path Available - Empty instance>";
    if (not_empty body)
      pathMsg = body.getPath();
    end if;
	USER::logError(msg:"Error in Create Event to Instance.execute: Invalid stack frame handle used. Using random top stack frame.",path:pathMsg);
  select any stack from instances of I_STACK;
  select one stack_frame related by stack->I_STF[R2929];
end if;

// Get all of the block in stack frames that exist for the top stack frame
select many block_in_stack_frames related by stack_frame->I_BSF[R2923];

// Find the local references in the top stack frame
select many top_stack_local_refs related by block_in_stack_frames->L_LCL[R3000]
                                     ->L_LCR[R3001];

// Find the recipient instance for the top stack frame
select one recipient_var related by self->V_VAR[R711];
select any recipient_local_ref related by block_in_stack_frames->L_LCL[R3000]
                   ->L_LCR[R3001] where selected.Var_ID == recipient_var.Var_ID;

// Since the same instance handle can point to multiple instances across
// different stack frames, make sure go through the currently executing 
// instance handle to get the correct instance.

select any inst related by recipient_local_ref->L_LCL[R3001]->RV_RVL[R3306]->
                       RV_SMV[R3300]->RV_IRV[R3308]->L_IIR[R3311]->I_INS[R3013];

if (not_empty inst)
  create object instance evtInst of I_EVI;
  relate evt to evtInst across R2906;

  // Relate this pending event to its instance
  relate evtInst to inst across R2935;

  // Hook up event data
  select one evt_spec_stmt related by self->E_CSME[R704]->
                                                       E_CES[R702]->E_ESS[R701];
  valueComputationComplete =
                      evt_spec_stmt.hookUpEventData(evtInst_ID:evtInst.Event_ID,
                                          stack_frame_id: param.stack_frame_id);
  if (valueComputationComplete)
    // Hook up the event instance to the result instance handle
    select one createEvtStmt related by self->E_CSME[R704]->E_CES[R702];
    createEvtStmt.hookUpEvtInstToHandle(evtInst_ID:evtInst.Event_ID,
                                          stack_frame_id: param.stack_frame_id);

    // Find the originating instance for this event and relate this event to it
    evt_spec_stmt.relateToOriginatingInst(evtInst_ID:evtInst.Event_ID,
                                          stack_frame_id: param.stack_frame_id);
  end if;
else
  pathMsg = "<No Path Available - Empty instance>";
    if (not_empty body)
      pathMsg = body.getPath();
    end if;
	USER::logError(msg:"Event: Create Event to Instance.execute: Could not find instance through the instance handle for event ",path:pathMsg);
end if;
',
	1,
	'',
	"59d75a70-03eb-4b6c-be26-06c15f5bf9dd");
INSERT INTO O_TPARM
	VALUES ("9b1afc2f-55d3-4f20-8764-275fd032d73b",
	"5450b082-2ba8-4cf4-aee4-df89ed4b0f81",
	'stack_frame_id',
	"ba5eda7a-def5-0000-0000-000000000005",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_REF
	VALUES ("068b3e3f-edc5-45ef-98c6-10d96f553689",
	"01038250-cff6-4839-a055-7ab85181ea61",
	0,
	"43156361-d0e4-4f52-a852-cf1d6116f115",
	"251b325e-0006-41e3-add6-56dc758deb1a",
	"65d0ec65-e584-417f-abce-360f6587c5b2",
	"3ebb07a7-ce22-457b-b5d6-c13b0d88a750",
	"b38dc916-09d6-44f7-b38d-f8b4618c34c5",
	"0bc18a78-33f0-4e38-a528-bf5f50212cde",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'Create SM Event Statement',
	'Statement_ID',
	'R704');
INSERT INTO R_RGO_PROXY
	VALUES ("068b3e3f-edc5-45ef-98c6-10d96f553689",
	"251b325e-0006-41e3-add6-56dc758deb1a",
	"65d0ec65-e584-417f-abce-360f6587c5b2",
	'../Event.xtuml');
INSERT INTO O_RTIDA_PROXY
	VALUES ("43156361-d0e4-4f52-a852-cf1d6116f115",
	"01038250-cff6-4839-a055-7ab85181ea61",
	0,
	"251b325e-0006-41e3-add6-56dc758deb1a",
	"3ebb07a7-ce22-457b-b5d6-c13b0d88a750",
	'../Event.xtuml');
INSERT INTO O_RATTR
	VALUES ("b38dc916-09d6-44f7-b38d-f8b4618c34c5",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	"9bdc49e0-583c-4741-ad6c-fa52d80977a5",
	"4f42b756-0c2e-4a87-b40f-87291682433c",
	1,
	'Statement_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("9bdc49e0-583c-4741-ad6c-fa52d80977a5",
	"4f42b756-0c2e-4a87-b40f-87291682433c",
	'../../Body/Statement/Statement.xtuml');
INSERT INTO O_ATTR
	VALUES ("b38dc916-09d6-44f7-b38d-f8b4618c34c5",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	"00000000-0000-0000-0000-000000000000",
	'Statement_ID',
	'

',
	'',
	'Statement_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_REF
	VALUES ("068b3e3f-edc5-45ef-98c6-10d96f553689",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	0,
	"5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"018b3738-232e-4ec7-8f9f-429e82fd11a1",
	"30ce2ddf-def2-4e46-8f85-88d4e289f8c5",
	"2856bcf3-6890-43fa-81dd-32e7f6b881ac",
	"ab0d8296-c6d0-49ac-a80c-2b8c6ab56a1a",
	"9b7c94d2-8da1-4c2f-9281-25128601a33b",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'Variable',
	'Var_ID',
	'R711.''has recipient''');
INSERT INTO R_RGO_PROXY
	VALUES ("068b3e3f-edc5-45ef-98c6-10d96f553689",
	"018b3738-232e-4ec7-8f9f-429e82fd11a1",
	"30ce2ddf-def2-4e46-8f85-88d4e289f8c5",
	'../Event.xtuml');
INSERT INTO O_RTIDA_PROXY
	VALUES ("5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	0,
	"018b3738-232e-4ec7-8f9f-429e82fd11a1",
	"2856bcf3-6890-43fa-81dd-32e7f6b881ac",
	'../Event.xtuml');
INSERT INTO O_RATTR
	VALUES ("ab0d8296-c6d0-49ac-a80c-2b8c6ab56a1a",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	"5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	1,
	'Var_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	'../../Value/Variable/Variable.xtuml');
INSERT INTO O_ATTR
	VALUES ("ab0d8296-c6d0-49ac-a80c-2b8c6ab56a1a",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	"b38dc916-09d6-44f7-b38d-f8b4618c34c5",
	'Var_ID',
	'

',
	'',
	'Var_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"068b3e3f-edc5-45ef-98c6-10d96f553689");
INSERT INTO O_OIDA
	VALUES ("b38dc916-09d6-44f7-b38d-f8b4618c34c5",
	"068b3e3f-edc5-45ef-98c6-10d96f553689",
	0,
	'Statement_ID');
INSERT INTO O_ID
	VALUES (1,
	"068b3e3f-edc5-45ef-98c6-10d96f553689");
INSERT INTO O_ID
	VALUES (2,
	"068b3e3f-edc5-45ef-98c6-10d96f553689");
INSERT INTO PE_PE
	VALUES ("068b3e3f-edc5-45ef-98c6-10d96f553689",
	1,
	"cae93765-eec1-4086-915a-d3082fb48fa7",
	"00000000-0000-0000-0000-000000000000",
	4);
INSERT INTO EP_PKG_PROXY
	VALUES ("cae93765-eec1-4086-915a-d3082fb48fa7",
	"00000000-0000-0000-0000-000000000000",
	"2f3ea6a7-20e9-405c-b68c-7fba041e7daf",
	'Event',
	'This subsystem focuses on the creation and generation
of events. Events to instances, class, creators and
external entities are covered, as well as the creation of
event instances of those types. Finally the generation
of pre-existing event instances are also covered.
Notify_Changes:false
Persistent:false
// This is used by schema_gen to ignore this subsystem (for publication)
TRANSLATE_FOR_EXTERNAL_USE:FALSE
',
	700,
	'../Event.xtuml');
