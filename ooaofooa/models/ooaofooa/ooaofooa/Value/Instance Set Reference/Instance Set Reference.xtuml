-- BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

INSERT INTO O_OBJ
	VALUES ("73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	'Instance Set Reference',
	807,
	'V_ISR',
	'This class represents a set of instance references, the result of a select many statement.',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("de80e2e5-31fe-4cd6-854c-6c273a4f39d4",
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	'getRuntimeValue',
	'',
	"ba5eda7a-def5-0000-0000-000000000005",
	1,
	'// Instance set Reference.getRuntimeValue()
select one body related by self->V_VAL[R801]->ACT_BLK[R826]->ACT_ACT[R601];
//Grab the stack
select any stack_frame from instances of I_STF where
                                selected.Stack_Frame_ID == param.stack_frame_id;
if (empty stack_frame)
  //Invalid stack frame ID!
  pathMsg = "<No Path Available - Empty instance>";
    if (not_empty body)
      pathMsg = body.getPath();
    end if;
	USER::logError(msg:"Error in Value.getValue: Invalid stack frame id used. Suspending.",path:pathMsg);
  select any stack from instances of I_STACK;
  stack.runState = RunStateType::Suspended;
  select one stack_frame related by stack->I_STF[R2929];
end if;

// Get all of the block in stack frames that exist for the stack frame
select many block_in_stack_frames related by stack_frame->I_BSF[R2923];
for each block_in_stack_frame in block_in_stack_frames

  // Find the one local value that matches the block in stack frame where
  // we are executing for the transient variable we want to assign
  select any instRef related by block_in_stack_frame->L_LCL[R3000]->
                              L_LCR[R3001] where selected.Var_ID == self.Var_ID;
  if (not_empty instRef)
    // We found the 1 local reference in this stack frame for this instance
    // handle id.  So stop looking.
    // All of this was necessary in order to support nested blocks that
    // reference variables that were created in outer blocks in this stack frame
    
    // WARNING: This implementation is based on the Object Action Language
    // definition that existed in November of 2005. If the language is changed
    // to become a strongly typed language where a user can define a variable
    // in an inner block with the same name as something that exists in the
    // outer block, then this implementation will not work because it does not
    // walk out of the current block.
    return instRef.getRuntimeValue(stack_frame_id:param.stack_frame_id);
  end if;
end for;
// If we get here, the reference was never set up before, set it up now
select one block related by self->V_VAL[R801]->ACT_BLK[R826];
localRefID = block.newLocalReference(stack_frame_id:param.stack_frame_id);
select any localRef related by stack_frame->I_BSF[R2923]->
               L_LCL[R3000]->L_LCR[R3001] where selected.Local_ID == localRefID;
select one irHandle related by self->V_VAR[R809]->V_INS[R814];
relate irHandle to localRef across R3003;
return localRef.getRuntimeValue(stack_frame_id:param.stack_frame_id);',
	1,
	'',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TPARM
	VALUES ("d64454e6-34f1-449d-b7f1-b920696dca74",
	"de80e2e5-31fe-4cd6-854c-6c273a4f39d4",
	'stack_frame_id',
	"ba5eda7a-def5-0000-0000-000000000005",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_REF
	VALUES ("73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"43ea4f47-4fe8-4167-8153-9e199477d0fd",
	0,
	"6e185a42-0dc6-4b9d-9d4b-38cb7c8aa772",
	"06497a90-3e1f-4449-b56c-c0400f566edf",
	"7db91a7f-892e-4695-b8fe-2ee7e18acda1",
	"b8c468d1-d7d3-40b3-85a0-dac116856ce9",
	"3bd84dd7-a6e6-4118-bb1c-39d5efb4d96e",
	"9c2c162c-b1f0-48f4-8a0f-5d53ab11e741",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'Value',
	'Value_ID',
	'R801');
INSERT INTO R_RGO_PROXY
	VALUES ("73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"06497a90-3e1f-4449-b56c-c0400f566edf",
	"7db91a7f-892e-4695-b8fe-2ee7e18acda1",
	'../Value.xtuml');
INSERT INTO O_RTIDA_PROXY
	VALUES ("6e185a42-0dc6-4b9d-9d4b-38cb7c8aa772",
	"43ea4f47-4fe8-4167-8153-9e199477d0fd",
	0,
	"06497a90-3e1f-4449-b56c-c0400f566edf",
	"b8c468d1-d7d3-40b3-85a0-dac116856ce9",
	'../Value.xtuml');
INSERT INTO O_RATTR
	VALUES ("3bd84dd7-a6e6-4118-bb1c-39d5efb4d96e",
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"6e185a42-0dc6-4b9d-9d4b-38cb7c8aa772",
	"43ea4f47-4fe8-4167-8153-9e199477d0fd",
	1,
	'Value_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("6e185a42-0dc6-4b9d-9d4b-38cb7c8aa772",
	"43ea4f47-4fe8-4167-8153-9e199477d0fd",
	'../Value/Value.xtuml');
INSERT INTO O_ATTR
	VALUES ("3bd84dd7-a6e6-4118-bb1c-39d5efb4d96e",
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"00000000-0000-0000-0000-000000000000",
	'Value_ID',
	'',
	'',
	'Value_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_REF
	VALUES ("73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	0,
	"5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"23564689-2189-4289-b601-5631fdd6c371",
	"96dd7da8-65d1-48f8-bdef-1d1ab1052007",
	"8429b5b2-ef4e-47de-ad03-1010dafc7911",
	"ff82b0c6-3dc3-4b18-89d1-27415c1c092e",
	"f14b37dc-fd6c-4265-bef0-532e11c44c9e",
	"00000000-0000-0000-0000-000000000000",
	0,
	'',
	'Variable',
	'Var_ID',
	'R809.''refers to''');
INSERT INTO R_RGO_PROXY
	VALUES ("73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"23564689-2189-4289-b601-5631fdd6c371",
	"96dd7da8-65d1-48f8-bdef-1d1ab1052007",
	'../Value.xtuml');
INSERT INTO O_RTIDA_PROXY
	VALUES ("5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	0,
	"23564689-2189-4289-b601-5631fdd6c371",
	"8429b5b2-ef4e-47de-ad03-1010dafc7911",
	'../Value.xtuml');
INSERT INTO O_RATTR
	VALUES ("ff82b0c6-3dc3-4b18-89d1-27415c1c092e",
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	1,
	'Var_ID');
INSERT INTO O_BATTR_PROXY
	VALUES ("5b3f451e-a4bf-4d7c-97db-547eae3c84ae",
	"f8c82d33-e7c5-4fb7-8c3c-77b2a47feca7",
	'../Variable/Variable.xtuml');
INSERT INTO O_ATTR
	VALUES ("ff82b0c6-3dc3-4b18-89d1-27415c1c092e",
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	"3bd84dd7-a6e6-4118-bb1c-39d5efb4d96e",
	'Var_ID',
	'

',
	'',
	'Var_ID',
	0,
	"ba5eda7a-def5-0000-0000-000000000007",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8");
INSERT INTO O_OIDA
	VALUES ("3bd84dd7-a6e6-4118-bb1c-39d5efb4d96e",
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	0,
	'Value_ID');
INSERT INTO O_ID
	VALUES (1,
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8");
INSERT INTO O_ID
	VALUES (2,
	"73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8");
INSERT INTO PE_PE
	VALUES ("73f2ff37-0fd3-4fa0-a3fd-92d4ec376fe8",
	1,
	"8b9e8a8c-7fd0-4ca9-b025-f7949d99c0c5",
	"00000000-0000-0000-0000-000000000000",
	4);
INSERT INTO EP_PKG_PROXY
	VALUES ("8b9e8a8c-7fd0-4ca9-b025-f7949d99c0c5",
	"00000000-0000-0000-0000-000000000000",
	"2f3ea6a7-20e9-405c-b68c-7fba041e7daf",
	'Value',
	'This subsystem formalizes the concepts of values (r-values) and variables 
(l-values). It also captures the concept of an actual parameter.
Notify_Changes:false
Persistent:false
// This is used by schema_gen to ignore this subsystem (for publication)
TRANSLATE_FOR_EXTERNAL_USE:FALSE
',
	800,
	'../Value.xtuml');
